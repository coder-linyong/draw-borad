(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"22dd":function(e,t,o){e.exports={brushContainer:"brush_brushContainer_2l19Z"}},"4aa7":function(e,t,o){e.exports={content:"Index_content_1FGv_",dropImg:"Index_dropImg_2-hK7"}},5408:function(e,t,o){e.exports={imgContainer:"resizeable_imgContainer_3pbcw",img:"resizeable_img_4KbBH",drop:"resizeable_drop_3mpFh",lt:"resizeable_lt_1_Ib_",rt:"resizeable_rt_3pTNC",rb:"resizeable_rb_2-_Ir",lb:"resizeable_lb_2W2z4",rotate:"resizeable_rotate_2_RhB"}},"5b88":function(e,t,o){"use strict";var n=o("4aa7"),s=o.n(n);o.d(t,"default",(function(){return s.a}))},"712e":function(e,t,o){"use strict";var n=o("5408"),s=o.n(n);o.d(t,"default",(function(){return s.a}))},"8b24":function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-page",{staticClass:"items-center justify-evenly column overflow-hidden"},[o("div",{staticClass:"row full-width bg-primary text-white q-pa-xs justify-center q-gutter-md"},[o("q-btn",{attrs:{dense:"",flat:"",round:"",icon:"brush"},on:{click:function(t){e.drawStatus="brush"}}},[o("q-menu",{attrs:{anchor:"bottom middle",self:"top middle","transition-show":"scale","transition-hide":"scale"}},[o("BrushComponent",{attrs:{brushSync:e.brush},on:{"update:brushSync":function(t){e.brush=t},"update:brush-sync":function(t){e.brush=t}}})],1)],1),o("q-btn",{attrs:{dense:"",flat:"",round:"",icon:"iconfont dbxingzhuang"},on:{click:function(t){return e.showImg()}}},[o("q-tooltip",[e._v("添加2D形状")])],1),o("q-btn",{attrs:{dense:"",flat:"",round:"",icon:"image"},on:{click:e.chooseFile}},[o("q-tooltip",[e._v("添加图片")])],1),o("q-btn",{attrs:{dense:"",flat:"",round:"",icon:"title"}},[o("q-tooltip",[e._v("添加文本")])],1),o("q-btn",{attrs:{dense:"",flat:"",round:"",icon:"iconfont dbxiangpicha"},on:{click:function(t){e.drawStatus="eraser"}}},[o("q-menu",{attrs:{anchor:"bottom middle",self:"top middle","transition-show":"scale","transition-hide":"scale"}},[o("EraserComponent",{attrs:{eraserSync:e.eraser},on:{"update:eraserSync":function(t){e.eraser=t},"update:eraser-sync":function(t){e.eraser=t}}})],1)],1),o("q-btn",{attrs:{dense:"",flat:"",round:"",icon:"refresh"},on:{click:e.reset}},[o("q-tooltip",[e._v("重置画板")])],1),o("q-btn",{attrs:{dense:"",flat:"",round:"",icon:"download"},on:{click:e.download}},[o("q-tooltip",[e._v("保存为图片")])],1)],1),o("q-drawer",{attrs:{side:"right",overlay:"",behavior:"desktop",bordered:""},model:{value:e.right,callback:function(t){e.right=t},expression:"right"}}),o("div",{ref:"content",staticClass:"col full-width",class:e.$style.content,on:{mousedown:e.contentMouseDown,wheel:e.contentWheel,mouseup:e.contentMouseUp}},[o("canvas",{ref:"board",style:{transform:"translate3d("+e.translatePos.x+"px,"+e.translatePos.y+"px,"+e.translatePos.z+"px)",cursor:e.cursor},attrs:{id:"board"},on:{mousedown:e.boardMouseDown,mousemove:e.boardMouseMove,mouseup:e.boardMouseUp,dragenter:function(t){return t.preventDefault(),e.dropHandler(t)},dragleave:function(t){return t.preventDefault(),e.dropHandler(t)},dragover:function(t){return t.preventDefault(),e.dropHandler(t)},drop:function(t){return t.preventDefault(),e.dropHandler(t)},contextmenu:function(e){e.preventDefault()}}})])],1)},s=[],i=o("60a3"),r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-card",{staticClass:"q-pa-md",class:e.$style.brushContainer},[o("q-card-section",[o("div",{staticClass:"row"},[o("div",[e._v("粗细")]),o("q-space"),o("div",[e._v(e._s(e.brush.size)+"px")])],1),o("q-slider",{attrs:{min:e.minSize,max:e.maxSize,step:1},model:{value:e.brush.size,callback:function(t){e.$set(e.brush,"size",t)},expression:"brush.size"}}),o("div",{staticClass:"row"},[o("div",[e._v("不透明度")]),o("q-space"),o("div",[e._v(e._s((100*e.brush.transparency/255).toFixed(2))+"%")])],1),o("q-slider",{attrs:{min:e.minTransparency,max:e.maxTransparency,step:1},model:{value:e.brush.transparency,callback:function(t){e.$set(e.brush,"transparency",t)},expression:"brush.transparency"}}),o("div",{staticClass:"row items-center"},[o("div",[e._v("颜色")]),o("q-space"),o("q-btn",{style:{background:e.brush.color},attrs:{round:"",dense:""}},[o("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[o("q-color",{model:{value:e.brush.color,callback:function(t){e.$set(e.brush,"color",t)},expression:"brush.color"}})],1)],1)],1)],1)],1)},a=[];class l{constructor({size:e=1,transparency:t=255,color:o="#000"}={}){const{maxSize:n,minSize:s,maxTransparency:i,minTransparency:r}=l;this.size=e<s?s:Math.min(n,e),this.transparency=t<r?r:Math.min(i,t),this.color=o}}l.maxSize=100,l.minSize=1,l.maxTransparency=255,l.minTransparency=1;var c=function(e,t,o,n){var s,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,o,r):s(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};let d=class extends i["f"]{constructor(){super(...arguments),this.minSize=l.minSize,this.maxSize=l.maxSize,this.minTransparency=l.minTransparency,this.maxTransparency=l.maxTransparency}};c([Object(i["d"])("brushSync")],d.prototype,"brush",void 0),d=c([i["a"]],d);var h=d,u=h,p=o("f403"),m=o("2877"),b=o("f09f"),f=o("a370"),v=o("2c91"),y=o("c1d0"),g=o("9c40"),w=o("7cbe"),x=o("b498"),C=o("eebe"),S=o.n(C);function T(e){this["$style"]=p["default"].locals||p["default"]}var q=Object(m["a"])(u,r,a,!1,T,null,null),_=q.exports;S()(q,"components",{QCard:b["a"],QCardSection:f["a"],QSpace:v["a"],QSlider:y["a"],QBtn:g["a"],QPopupProxy:w["a"],QColor:x["a"]});var k=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-card",{staticClass:"q-pa-md",class:e.$style.eraserContainer},[o("q-card-section",[o("div",{staticClass:"row"},[o("div",[e._v("大小")]),o("q-space"),o("div",[e._v(e._s(e.eraser.size)+"px")])],1),o("q-slider",{attrs:{min:e.minSize,max:e.maxSize,step:1},model:{value:e.eraser.size,callback:function(t){e.$set(e.eraser,"size",t)},expression:"eraser.size"}})],1)],1)},P=[];class z{constructor({size:e=1}={}){const{maxSize:t,minSize:o}=z;this.size=e<o?o:Math.min(t,e)}}z.maxSize=100,z.minSize=1;var D=function(e,t,o,n){var s,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,o,r):s(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};let M=class extends i["f"]{constructor(){super(...arguments),this.minSize=z.minSize,this.maxSize=z.maxSize}};D([Object(i["d"])("eraserSync")],M.prototype,"eraser",void 0),M=D([i["a"]],M);var j=M,O=j,$=o("a71d");function R(e){this["$style"]=$["default"].locals||$["default"]}var W=Object(m["a"])(O,k,P,!1,R,null,null),B=W.exports;S()(W,"components",{QCard:b["a"],QCardSection:f["a"],QSpace:v["a"],QSlider:y["a"]});var Q=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{ref:"container",class:e.$style.imgContainer,on:{wheel:function(e){e.stopPropagation()},mousemove:e.mouseMove,mouseup:e.mouseup,mousedown:function(t){return t.preventDefault(),e.mouseDown(t)}}},[o("div",{ref:"box",class:e.$style.img,style:e.imgStyle,on:{mousedown:function(e){e.preventDefault()}}},["img"===e.type?o("img",{ref:"img",attrs:{src:e.url,width:e.width-2*e.padding,height:e.height-2*e.padding},on:{mousedown:function(e){e.preventDefault()}}}):e._e(),"shape"===e.type?o("canvas",{ref:"img",attrs:{width:e.width-2*e.padding,height:e.height-2*e.padding},on:{mousedown:function(e){e.preventDefault()}}}):e._e(),e._l(e.dropBlock,(function(t){return o("div",{class:[e.$style.drop,e.$style[t]],attrs:{"data-pos":t},on:{mousedown:function(e){e.preventDefault()}}})})),o("q-btn",{staticClass:"absolute-center bg-white",style:{transform:"translate(-50%,-50%) rotate("+-e.rotate+"deg)"},attrs:{flat:"",dense:"",icon:"done",round:""},on:{click:e.complete}})],2),o("q-slider",{staticClass:"absolute-bottom",class:e.$style.rotate,staticStyle:{width:"300px"},attrs:{max:360,min:0,label:"","label-value":e.rotate+"°"},model:{value:e.rotate,callback:function(t){e.rotate=t},expression:"rotate"}}),"shape"===e.type?o("q-btn",{staticClass:"absolute-bottom-right bg-white",attrs:{icon:"edit",round:"",dense:""},on:{click:function(t){e.visible=!0}}}):e._e(),"shape"===e.type?o("q-dialog",{attrs:{position:"right"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[o("q-card",{staticClass:"relative-position",staticStyle:{width:"300px"}},[o("q-card-section",{staticClass:"row items-center justify-end"},[o("q-btn",{attrs:{dense:"",round:"",icon:"close",flat:"",size:"sm"},on:{click:function(t){e.visible=!1}}})],1),o("ShapeEditor",{attrs:{shapeSync:e.shape},on:{"update:shapeSync":function(t){e.shape=t},"update:shape-sync":function(t){e.shape=t},change:e.onShapeChange,choose:e.onChoose}})],1)],1):e._e()],1)},N=[],I=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-card-section",[o("div",{staticClass:"row"},[e._v("形状")]),o("div",{staticClass:"q-gutter-sm row q-pa-none q-py-sm"},e._l(e.shapes,(function(t){return o("q-btn",{attrs:{Key:t.name,icon:"iconfont "+t.icon,size:"20px",color:e.currClassName===t.name?"primary":"white","text-color":e.currClassName===t.name?"white":"primary"},on:{click:function(o){return e.onChoose(t.name)}}},[o("q-tooltip",[e._v(e._s(t.label))])],1)})),1),"Polygon"===e.currClassName?o("div",{staticClass:"row items-center q-py-sm"},[o("div",[e._v("半径")]),o("q-space"),o("q-input",{staticStyle:{width:"70px"},attrs:{type:"number",outlined:"",dense:"",min:e.minRadius},model:{value:e.option.radius,callback:function(t){e.$set(e.option,"radius",t)},expression:"option.radius"}}),o("div",[e._v("像素")])],1):e._e(),"Polygon"===e.currClassName?o("div",{staticClass:"row items-center q-py-sm"},[o("div",[e._v("边数")]),o("q-space"),o("q-input",{staticStyle:{width:"70px"},attrs:{type:"number",outlined:"",dense:"",min:e.minBorderNumber},model:{value:e.option.borderNumber,callback:function(t){e.$set(e.option,"borderNumber",t)},expression:"option.borderNumber"}})],1):e._e(),o("div",{staticClass:"row items-center q-py-sm"},[o("q-toggle",{attrs:{color:e.option.fillColor,label:e.option.fill?"填充":"不填充"},model:{value:e.option.fill,callback:function(t){e.$set(e.option,"fill",t)},expression:"option.fill"}}),o("q-space"),o("q-btn",{staticClass:"shadow-0 q-mr-sm",style:{background:e.option.fillColor},attrs:{round:"",dense:"",disable:!e.option.fill}},[o("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[o("q-color",{model:{value:e.option.fillColor,callback:function(t){e.$set(e.option,"fillColor",t)},expression:"option.fillColor"}})],1)],1)],1),o("div",{staticClass:"row items-center q-py-sm"},[o("q-toggle",{attrs:{color:e.option.borderColor,label:e.option.border?"描边":"不描边"},model:{value:e.option.border,callback:function(t){e.$set(e.option,"border",t)},expression:"option.border"}}),o("q-space"),o("q-btn",{staticClass:"shadow-0 q-mr-sm",style:{background:e.option.borderColor},attrs:{round:"",dense:"",disable:!e.option.border}},[o("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[o("q-color",{model:{value:e.option.borderColor,callback:function(t){e.$set(e.option,"borderColor",t)},expression:"option.borderColor"}})],1)],1)],1),o("div",{staticClass:"row"},[o("div",[e._v("描边粗细")]),o("q-space"),o("div",[e._v(e._s(e.option.borderWidth)+"像素")])],1),o("q-slider",{attrs:{min:e.minBorderWidth,max:e.maxBorderWidth,step:1},model:{value:e.option.borderWidth,callback:function(t){e.$set(e.option,"borderWidth",t)},expression:"option.borderWidth"}}),o("div",{staticClass:"row items-center q-py-sm"},[o("div",[e._v("描边线长")]),o("q-space"),o("q-input",{staticStyle:{width:"70px"},attrs:{type:"number",outlined:"",dense:"",min:0},model:{value:e.option.lineDash[0],callback:function(t){e.$set(e.option.lineDash,0,t)},expression:"option.lineDash[0]"}}),o("div",[e._v("像素")])],1),o("div",{staticClass:"row items-center q-py-sm"},[o("div",[e._v("描边线间隙")]),o("q-space"),o("q-input",{staticStyle:{width:"70px"},attrs:{type:"number",outlined:"",dense:"",min:0},model:{value:e.option.lineDash[1],callback:function(t){e.$set(e.option.lineDash,1,t)},expression:"option.lineDash[1]"}}),o("div",[e._v("像素")])],1),o("div",{staticClass:"row"},[o("div",[e._v("不透明度")]),o("q-space"),o("div",[e._v(e._s(e.option.transparency)+"%")])],1),o("q-slider",{attrs:{min:e.minTransparency,max:e.maxTransparency,step:1},model:{value:e.option.transparency,callback:function(t){e.$set(e.option,"transparency",t)},expression:"option.transparency"}})],1)},E=[];class H{constructor({lineDash:e=[0,0],border:t=!0,borderColor:o="#000",borderWidth:n=10,fill:s=!1,fillColor:i="#000",transparency:r=100,x:a=0,y:l=0}={}){this[Symbol.toStringTag]="Shape",this.lineDash=[e[0],e[1]],this.border=!t&&!s||t,this.borderColor=o,this.borderWidth=[H.minBorderWidth,H.maxBorderWidth,n].sort()[1],this.fill=s,this.fillColor=i,this.transparency=[H.minTransparency,H.maxTransparency,r].sort()[1],this.x=a,this.y=l}setStyle(e){const{x:t=0,y:o=0,borderColor:n="#000",borderWidth:s=10,fillColor:i="#000",lineDash:r=[0,0],transparency:a=100}=this;e.save(),e.translate(t,o),e.setLineDash(r),e.fillStyle=i,e.lineWidth=s,e.globalAlpha=a/100,e.strokeStyle=n}complete(e){const{border:t,fill:o}=this;t||o||(this.border=!0),t&&e.stroke(),o&&e.fill(),e.restore()}}H.maxTransparency=100,H.minTransparency=1,H.maxBorderWidth=100,H.minBorderWidth=1;class L extends H{constructor(e){super(e),this[Symbol.toStringTag]="Polygon",this.radius=e.radius,this.borderNumber=Math.max(e.borderNumber,L.minBorderWidth)}draw(e){const{borderNumber:t,radius:o}=this,{canvas:{width:n,height:s}}=e;e.clearRect(0,0,n,s),this.setStyle(e);const i=2*Math.PI/t;e.beginPath();for(let r=0;r<2*Math.PI;r+=i){const t=Math.cos(r)*o,n=Math.sin(r)*o;e.lineTo(t,n)}e.closePath(),this.complete(e)}}L.minRadius=50,L.minBorderNumber=3;var U=function(e,t,o,n){var s,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,o,r):s(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};let F=class extends i["f"]{constructor(){super(...arguments),this.minTransparency=H.minTransparency,this.maxTransparency=H.maxTransparency,this.minBorderWidth=H.minBorderWidth,this.maxBorderWidth=H.maxBorderWidth,this.minRadius=L.minRadius,this.minBorderNumber=L.minBorderNumber,this.option={border:!1,borderColor:"",borderNumber:L.minBorderNumber,borderWidth:0,fill:!1,fillColor:"",lineDash:[0,0],radius:L.minRadius,transparency:0,x:0,y:0},this.shapes=[{icon:"dbduobianxing",name:"Polygon",label:"多边形"},{icon:"dbliuchengtujiaonangxing",name:"Capsule",label:"胶囊形"},{icon:"dbzhijiaosanjiaoxing",name:"RightTriangle",label:"直角三角形"},{icon:"dbjiantou",name:"Arrow",label:"指向箭头"},{icon:"dbxing",name:"Star",label:"五角星"},{icon:"dbqipao",name:"Bubble",label:"气泡"},{icon:"dbgou",name:"Hook",label:"钩"},{icon:"dbcuohao",name:"Fork",label:"叉号"}]}get currClassName(){return this.shape[Symbol.toStringTag]}onChange(){return!0}onChoose(e){return e}optionChange(e){const{shape:t}=this;for(const o of Object.keys(e))o in t&&(t[o]=e[o]);this.onChange()}updateOption(){const{shape:e,option:t}=this;for(const o of Object.keys(e))t[o]=e[o]}mounted(){setTimeout((()=>{this.updateOption()}),100)}};U([Object(i["d"])("shapeSync")],F.prototype,"shape",void 0),U([Object(i["b"])("change")],F.prototype,"onChange",null),U([Object(i["b"])("choose")],F.prototype,"onChoose",null),U([Object(i["g"])("option",{deep:!0})],F.prototype,"optionChange",null),F=U([Object(i["a"])({})],F);var K=F,A=K,J=o("05c0"),Y=o("27f9"),X=o("9564"),G=Object(m["a"])(A,I,E,!1,null,null,null),V=G.exports;S()(G,"components",{QCardSection:f["a"],QBtn:g["a"],QTooltip:J["a"],QSpace:v["a"],QInput:Y["a"],QToggle:X["a"],QPopupProxy:w["a"],QColor:x["a"],QSlider:y["a"]});class Z extends H{constructor(e){super(e),this[Symbol.toStringTag]="Capsule"}draw(e){const{canvas:{width:t,height:o}}=e;e.clearRect(0,0,t,o);const{borderWidth:n=10}=this,s=Math.min(t,o)/2-n;this.setStyle(e),e.beginPath(),e.arc(0,-o/2+n+s,s,0,Math.PI,!0),e.arc(0,o/2-n-s,s,Math.PI,0,!0),e.closePath(),this.complete(e)}}class ee extends H{constructor(e){super(e),this[Symbol.toStringTag]="RightTriangle"}draw(e){const{canvas:{width:t,height:o}}=e;e.clearRect(0,0,t,o);const{borderWidth:n=10}=this,s=(t-2*n)/2,i=(o-2*n)/2;this.setStyle(e),e.lineJoin="miter",e.beginPath(),e.moveTo(-s,-i),e.lineTo(-s,i),e.lineTo(s,i),e.closePath(),this.complete(e)}}class te extends H{constructor(e){super(e),this[Symbol.toStringTag]="Arrow"}draw(e){const{canvas:{width:t,height:o}}=e;e.clearRect(0,0,t,o);const{borderWidth:n=10}=this,s=t/2-n,i=o/2-n;this.setStyle(e),e.beginPath(),e.moveTo(0,i/2),e.lineTo(-s,i),e.lineTo(0,-i),e.lineTo(s,i),e.closePath(),this.complete(e)}}class oe extends H{constructor(e){super(e),this[Symbol.toStringTag]="Star",this.angleNum=e.angleNum}draw(e){const{canvas:{width:t,height:o}}=e;e.clearRect(0,0,t,o);const{borderWidth:n=10,angleNum:s}=this,i=Math.min(t,o)/2-n,r=i/2,a=2*Math.PI/s;this.setStyle(e),e.beginPath(),e.moveTo(0,r);for(let l=0;l<s;l++){const t=l*a+Math.PI/2,o=l*a+Math.PI/2+a/2;e.lineTo(Math.cos(t)*r,Math.sin(t)*r),e.lineTo(Math.cos(o)*i,Math.sin(o)*i)}e.closePath(),this.complete(e)}}class ne extends H{constructor(e){super(e),this[Symbol.toStringTag]="Bubble"}draw(e){const{canvas:{width:t,height:o}}=e;e.clearRect(0,0,t,o);const{borderWidth:n=10}=this,s=t/2-n,i=o/2-n;this.setStyle(e),e.lineJoin="round",e.beginPath(),e.moveTo(-s,-i),e.lineTo(s,-i),e.lineTo(s,i/2),e.lineTo(0,i/2),e.lineTo(2*-s/3,i),e.lineTo(-s/2,i/2),e.lineTo(-s,i/2),e.closePath(),this.complete(e)}}class se extends H{constructor(e){super(e),this[Symbol.toStringTag]="Hook"}draw(e){const{canvas:{width:t,height:o}}=e;e.clearRect(0,0,t,o);const{borderWidth:n=10}=this,s=t/2-n,i=o/2-n;this.setStyle(e),e.beginPath(),e.moveTo(s/2,-i),e.lineTo(s,-i/2),e.lineTo(-s/4,i),e.lineTo(-s,0),e.lineTo(-s/2,-i/2),e.lineTo(-s/4,0),e.closePath(),this.complete(e)}}class ie extends H{constructor(e){super(e),this[Symbol.toStringTag]="Fork"}draw(e){const{canvas:{width:t,height:o}}=e;e.clearRect(0,0,t,o);const{borderWidth:n=10}=this,s=t/2-n,i=o/2-n;this.setStyle(e),e.beginPath(),e.moveTo(s/2,-i),e.lineTo(s,-i/2),e.lineTo(s/2,0),e.lineTo(s,i/2),e.lineTo(s/2,i),e.lineTo(0,i/2),e.lineTo(-s/2,i),e.lineTo(-s,i/2),e.lineTo(-s/2,0),e.lineTo(-s,-i/2),e.lineTo(-s/2,-i),e.lineTo(0,-i/2),e.closePath(),this.complete(e)}}var re=function(e,t,o,n){var s,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,o,r):s(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},ae=function(e,t,o,n){function s(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,i){function r(e){try{l(n.next(e))}catch(t){i(t)}}function a(e){try{l(n["throw"](e))}catch(t){i(t)}}function l(e){e.done?o(e.value):s(e.value).then(r,a)}l((n=n.apply(e,t||[])).next())}))};let le=class extends i["f"]{constructor(){super(...arguments),this.padding=10,this.width=0,this.height=0,this.drop=!1,this.visible=!0,this.dropDirection="rb",this.rotate=0,this.move=!1,this.pos={x:0,y:0},this.shape=new L({borderNumber:L.minBorderNumber,radius:L.minRadius}),this.dropBlock=["lt","rt","rb","lb"]}get imgStyle(){const{pos:e,width:t,height:o,padding:n,rotate:s}=this;return{left:`${e.x}px`,top:`${e.y}px`,padding:`${n}px`,width:t?`${t}px`:"auto",height:o?`${o}px`:"auto",transform:`translate(-50%, -50%) rotate(${s}deg)`}}complete(){const{rotate:e,img:t,pos:{x:o,y:n}}=this,{clientWidth:s,clientHeight:i}=t;return{rotate:e,x:o-s/2,y:n-i/2,width:s,height:i}}onChoose(e){"Polygon"===e?this.shape=new L({borderNumber:L.minBorderNumber,radius:L.minRadius}):"Capsule"===e?this.shape=new Z({}):"RightTriangle"===e?this.shape=new ee({}):"Arrow"===e?this.shape=new te({}):"Star"===e?this.shape=new oe({angleNum:5}):"Bubble"===e?this.shape=new ne({}):"Hook"===e?this.shape=new se({}):"Fork"===e&&(this.shape=new ie({})),this.onShapeChange()}onShapeChange(){const{shape:e,img:t,ctx:o}=this;e.x=t.width/2,e.y=t.height/2,e.draw(o)}mouseDown(e){var t,o,n,s;const{pos:i}=null!==(o=null===(t=null===e||void 0===e?void 0:e.target)||void 0===t?void 0:t.dataset)&&void 0!==o&&o,r=null!==(s=null===(n=null===e||void 0===e?void 0:e.target)||void 0===n?void 0:n.nodeName)&&void 0!==s?s:"";i?(this.drop=!0,this.dropDirection=i):"IMG"!==r&&"CANVAS"!==r||(this.move=!0)}mouseMove(e){const{drop:t,move:o,dropDirection:n}=this,{movementX:s,movementY:i}=e;if(t){let e=0,t=0;"rb"===n?(e=this.width+s,t=this.height+i):"lt"===n?(e=this.width-s,t=this.height-i):"rt"===n?(e=this.width+s,t=this.height-i):"lb"===n&&(e=this.width-s,t=this.height+i),this.width=Math.max(100,e),this.height=Math.max(100,t),this.ctx&&setTimeout((()=>{this.onShapeChange()}),10)}else o&&(this.pos.x+=s,this.pos.y+=i)}mouseup(){this.drop=!1,this.move=!1}init(){return ae(this,void 0,void 0,(function*(){return new Promise((e=>{setTimeout((()=>{const{container:t,box:o,img:n}=this;this.pos={x:t.clientWidth/2,y:t.clientHeight/2},this.width=o.clientWidth,this.height=o.clientHeight,n instanceof HTMLElement&&(this.ctx=n.getContext("2d"),this.shape.draw(this.ctx)),e(!0)}),50)}))}))}mounted(){return ae(this,void 0,void 0,(function*(){yield this.init()}))}};re([Object(i["c"])({type:String})],le.prototype,"url",void 0),re([Object(i["c"])({type:String,required:!0})],le.prototype,"type",void 0),re([Object(i["e"])("container")],le.prototype,"container",void 0),re([Object(i["e"])("box")],le.prototype,"box",void 0),re([Object(i["e"])("img")],le.prototype,"img",void 0),re([Object(i["b"])("complete")],le.prototype,"complete",null),le=re([Object(i["a"])({components:{ShapeEditor:V}})],le);var ce=le,de=ce,he=o("712e"),ue=o("24e8");function pe(e){this["$style"]=he["default"].locals||he["default"]}var me=Object(m["a"])(de,Q,N,!1,pe,null,null),be=me.exports;S()(me,"components",{QBtn:g["a"],QSlider:y["a"],QDialog:ue["a"],QCard:b["a"],QCardSection:f["a"]});var fe=function(e,t,o,n){var s,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,o,r):s(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};let ve=class extends i["f"]{constructor(){super(...arguments),this.right=!1,this.ctrl=!1,this.isMouseDown=!1,this.drawStatus="brush",this.oldPoint={x:0,y:0},this.translatePos={x:0,y:0,z:0},this.brush=new l,this.eraser=new z}get cursor(){const{ctrl:e,isMouseDown:t}=this;return e?"move":t?"crosshair":void 0}brushChange(e){const{ctx:t}=this;t.lineWidth=e.size,t.strokeStyle=e.color,t.fillStyle=e.color,t.globalAlpha=e.transparency/255}eraserChange(e){const{ctx:t}=this;t.lineWidth=e.size}reset(){const{ctx:e,board:t}=this;e.clearRect(0,0,t.width,t.height)}download(){const{board:e}=this,t=document.createElement("a");t.href=e.toDataURL(),t.download="img",t.click()}showImg(e){const{content:t,ctx:o}=this,n=new be({propsData:{url:e,type:e?"img":"shape"}});n.$mount(),t.appendChild(n.$el),n.$on("complete",(e=>{const{x:s,y:i,width:r,height:a,rotate:l}=e;o.save(),o.translate(s+r/2,i+a/2),o.rotate(l*Math.PI/180),o.drawImage(n.img,-r/2,-a/2,r,a),o.restore(),t.removeChild(n.$el),n.$destroy()}))}chooseFile(){const e=document.createElement("input");e.type="file",e.accept="image/*",e.click(),e.addEventListener("change",(()=>{const{files:t}=e;if(t&&t.length>0){const e=URL.createObjectURL(t[0]);this.showImg(e)}}))}keyUp(e){const{key:t}=e;"Control"===t&&(this.ctrl=e.ctrlKey)}keyDown(e){const{key:t}=e;"Control"===t&&(this.ctrl=e.ctrlKey)}boardMouseDown(e){if(e.ctrlKey)return;const{offsetX:t,offsetY:o}=e,{ctx:n,drawStatus:s,brush:i,eraser:r}=this;this.oldPoint={x:t,y:o},this.isMouseDown=!0,"brush"===s?n.lineWidth=i.size:"eraser"===s&&(n.lineWidth=r.size)}boardMouseMove(e){const{offsetX:t,offsetY:o,ctrlKey:n}=e,{drawStatus:s,ctx:i,isMouseDown:r,board:a}=this;if(t<=1||t>=a.width-1||o<=1||o>=a.height-1||n)this.isMouseDown=!1;else if(r){const{oldPoint:{x:e,y:n}}=this;"brush"===s?(i.beginPath(),i.moveTo(e,n),i.lineTo(t,o),i.closePath(),i.stroke()):"eraser"===s&&(i.save(),i.globalCompositeOperation="destination-out",i.beginPath(),i.moveTo(e,n),i.lineTo(t,o),i.closePath(),i.stroke(),i.restore()),this.oldPoint={x:t,y:o}}}dropHandler(e){var t;if("drop"===e.type&&e.dataTransfer){const{files:o}=null!==(t=null===e||void 0===e?void 0:e.dataTransfer)&&void 0!==t?t:[];if(o&&o.length>0){const e=URL.createObjectURL(o[0]);this.showImg(e)}}}boardMouseUp(e){if(e.ctrlKey)return;const{drawStatus:t,isMouseDown:o}=this;o&&("brush"!==t&&"eraser"!==t||(this.isMouseDown=!1))}contentMouseDown(){const{content:e,ctrl:t}=this;t&&e.addEventListener("mousemove",this.contentMouseMove)}contentMouseMove(e){const{translatePos:t}=this,{movementY:o,movementX:n}=e;t.x+=n,t.y+=o}contentWheel(e){const{translatePos:t}=this,{deltaY:o,ctrlKey:n}=e;n&&e.preventDefault(),o<0?t.z+=10:t.z-=10}contentMouseUp(){const{content:e}=this;e.removeEventListener("mousemove",this.contentMouseMove)}mounted(){var e;const{board:t}=this;if(window.addEventListener("keydown",this.keyDown),window.addEventListener("keyup",this.keyUp),null!==(e=t.getContext)&&void 0!==e&&e){const e=this.ctx=this.board.getContext("2d");setTimeout((()=>{e.lineCap="round",e.lineJoin="round"}))}t.width=document.body.clientWidth,t.height=document.body.clientHeight-58}beforeDestroy(){window.removeEventListener("keydown",this.keyDown),window.removeEventListener("keyup",this.keyUp)}};fe([Object(i["e"])("board")],ve.prototype,"board",void 0),fe([Object(i["e"])("content")],ve.prototype,"content",void 0),fe([Object(i["g"])("brush",{deep:!0})],ve.prototype,"brushChange",null),fe([Object(i["g"])("eraser",{deep:!0})],ve.prototype,"eraserChange",null),ve=fe([Object(i["a"])({components:{Resizeable:be,EraserComponent:B,BrushComponent:_}})],ve);var ye=ve,ge=ye,we=o("5b88"),xe=o("9989"),Ce=o("4e73"),Se=o("9404");function Te(e){this["$style"]=we["default"].locals||we["default"]}var qe=Object(m["a"])(ge,n,s,!1,Te,null,null);t["default"]=qe.exports;S()(qe,"components",{QPage:xe["a"],QBtn:g["a"],QMenu:Ce["a"],QTooltip:J["a"],QDrawer:Se["a"]})},"8eca":function(e,t,o){e.exports={eraserContainer:"eraser_eraserContainer_2Fq9c"}},a71d:function(e,t,o){"use strict";var n=o("8eca"),s=o.n(n);o.d(t,"default",(function(){return s.a}))},f403:function(e,t,o){"use strict";var n=o("22dd"),s=o.n(n);o.d(t,"default",(function(){return s.a}))}}]);